version: v2
plugins:
  # Generate Go code with protoc-gen-go
  - local: protoc-gen-go
    out: pkg/proto
    opt:
      - paths=source_relative

  # Generate Connect-Go code
  - local: protoc-gen-connect-go
    out: pkg/proto
    opt:
      - paths=source_relative

  # Generate TypeScript code (Protobuf-ES v2 w/ connect support)
  - local: web/discopanel/node_modules/.bin/protoc-gen-es
    out: web/discopanel/src/lib/proto
    opt:
      - target=ts
      - import_extension=none